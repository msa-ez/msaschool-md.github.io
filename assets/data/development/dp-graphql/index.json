{"hash":"f58eca0934380d084e357b0b95045cf3b386277b","data":{"markdownPage":{"id":"f49669fffa01e020ab34c63bb8736b40","title":"[êµ¬í˜„] ë°ì´í„°í”„ë¡œì ì…˜-GraphQL","description":"","path":"/development/dp-graphql/","timeToRead":2,"content":"<h1 id=\"êµ¬í˜„-ë°ì´í„°í”„ë¡œì ì…˜-graphql\"><a href=\"#%EA%B5%AC%ED%98%84-%EB%8D%B0%EC%9D%B4%ED%84%B0%ED%94%84%EB%A1%9C%EC%A0%9D%EC%85%98-graphql\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>[êµ¬í˜„] ë°ì´í„°í”„ë¡œì ì…˜-GraphQL</h1>\n<h3 id=\"graphqlë¡œ-ë°±ì—”ë“œ-ë°ì´í„°-í†µí•©\"><a href=\"#graphql%EB%A1%9C-%EB%B0%B1%EC%97%94%EB%93%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%86%B5%ED%95%A9\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>GraphQLë¡œ ë°±ì—”ë“œ ë°ì´í„° í†µí•©</h3>\n<ul>\n<li>ì£¼ë¬¸,ìƒí’ˆ,ë°°ì†¡ ì„œë¹„ìŠ¤ë¥¼ ëª¨ë‘ ê¸°ë™í•œë‹¤.</li>\n<li>í„°ë¯¸ë„ 3ê°œë¥¼ ì—´ì–´ì„œ ê°ê°ì˜ í”„ë¡œì íŠ¸ë¡œ ì´ë™í•œ í›„, runì„ ì‹¤í–‰í•œë‹¤.</li>\n<li>ì£¼ë¬¸ì„œë¹„ìŠ¤ ê¸°ë™(8081)</li>\n</ul>\n<pre class=\"language-text\"><code class=\"language-text\">cd reqres_orders\nmvn spring-boot:run</code></pre>\n<ul>\n<li>ìƒí’ˆì„œë¹„ìŠ¤ ê¸°ë™(8085)</li>\n</ul>\n<pre class=\"language-text\"><code class=\"language-text\">cd reqres_products\nmvn spring-boot:run</code></pre>\n<ul>\n<li>ë°°ì†¡ì„œë¹„ìŠ¤ ê¸°ë™(8082)</li>\n</ul>\n<pre class=\"language-text\"><code class=\"language-text\">cd reqres_delivery\nmvn spring-boot:run</code></pre>\n<ul>\n<li>1ê°œì˜ ì£¼ë¬¸ì„ ìƒì„±í•œë‹¤.</li>\n</ul>\n<pre class=\"language-text\"><code class=\"language-text\">http localhost:8081/orders productId=1 quantity=1 customerId=&quot;1@uengine.org&quot;</code></pre>\n<ul>\n<li>GraphQL ê¸°ë™(8089)</li>\n</ul>\n<pre class=\"language-text\"><code class=\"language-text\">cd apollo_graphql\nnpm install\nnpm start</code></pre>\n<ul>\n<li>\n<p>GraphQL Playground </p>\n<blockquote>\n<p>ì‘ì„±í•œ GraphQL Type, Resolver ëª…ì„¸í™•ì¸, ë°ì´í„° ìš”ì²­ ë° í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•œ ì›Œí¬ë²¤ì¹˜</p>\n</blockquote>\n</li>\n<li>Labs > í¬íŠ¸ì—´ê¸° > 8089ë¡œ WebUIì— ì ‘ì†</li>\n</ul>\n<h3 id=\"ì„œë¹„ìŠ¤-ì¡°íšŒ\"><a href=\"#%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A1%B0%ED%9A%8C\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ì„œë¹„ìŠ¤ ì¡°íšŒ</h3>\n<ul>\n<li>ì „ì²´ ì£¼ë¬¸ì„œë¹„ìŠ¤</li>\n</ul>\n<pre class=\"language-gql\"><code class=\"language-gql\">query getOrders {\n  orders {\n    productId\n    productName\n    quantity\n    price\n  }\n}</code></pre>\n<ul>\n<li>ë‹¨ì¼ ì£¼ë¬¸ì„œë¹„ìŠ¤( id=1 ì£¼ë¬¸ì„œë¹„ìŠ¤ )</li>\n</ul>\n<pre class=\"language-gql\"><code class=\"language-gql\">query getOrderById {\n  order(orderId: 1) {\n    productId\n    productName\n    quantity\n    price\n  }\n}</code></pre>\n<ul>\n<li>ë³µí•© ì„œë¹„ìŠ¤ ì¡°íšŒ\norder ì„œë¹„ìŠ¤ì˜ ì—°ê²°ëœ product, delivery ì •ë³´ì¡°íšŒ</li>\n</ul>\n<pre class=\"language-gql\"><code class=\"language-gql\">query Query{\n  orders {\n    quantity\n    customerId\n    state\n    product {\n      price\n      name\n    }\n    delivery {\n      deliveryAddress\n    }\n  }\n}</code></pre>\n<h4 id=\"graphql-íŒŒì¼-ì°¸ê³ \"><a href=\"#graphql-%ED%8C%8C%EC%9D%BC-%EC%B0%B8%EA%B3%A0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>GraphQL íŒŒì¼ ì°¸ê³ </h4>\n<ol>\n<li>src/graphql/resolvers.js</li>\n</ol>\n<ul>\n<li>ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” êµ¬ì²´ì ì¸ ê³¼ì •ì„ êµ¬í˜„     </li>\n<li>ì„œë¹„ìŠ¤ì˜ ì•¡ì…˜ë“¤ì„ í•¨ìˆ˜ë¡œ ì§€ì •, ìš”ì²­ì— ë”°ë¼ ë°ì´í„°ë¥¼ ë°˜í™˜(Query), Mutation(ì…ë ¥, ìˆ˜ì •, ì‚­ì œ) í•˜ëŠ” Query ë˜ëŠ” êµ¬í˜„ì²´ ì‘ì„±</li>\n</ul>\n<pre class=\"language-text\"><code class=\"language-text\">ì˜ˆì‹œ)\nconst resolvers = {\n  //typeDefsì˜ ê°ì²´ ìœ í˜• ì •ë³´(Order, Query, Product) í˜¸ì¶œ ì„ ì–¸\n  \n  Query: {\n     //...\n  } \n  Order: {\n      deliveries: (root, args, {dataSources}) =&gt; {}\n\n      //  í•¨ìˆ˜ëª…: (parent, args, context, info) =&gt; {}\n      //  * parent  : ë£¨íŠ¸ì— ëŒ€í•œ resolverì˜ ë°˜í™˜ ê°’.\n      //  * args    : í•¨ìˆ˜ í˜¸ì¶œì‹œ args ë˜ëŠ” {parameter}ìœ¼ë¡œ ì¸ìê°’.\n      //  * context : \n            íŠ¹ì • ì‘ì—…ì„ ìœ„í•´ ì‹¤í–‰ë˜ëŠ” ëª¨ë“  resolverì— ì „ë‹¬ë˜ëŠ” ê°œì²´,\n            ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ê³¼ ê°™ì€ ì»¨í…ìŠ¤íŠ¸ë¥¼ ê³µìœ .\n          {dataSources}: xxx-rest-api.jsì™€ ì—°ê²°ëœ ë°ì´í„° í˜¸ì¶œ.\n      //  * info    : í•„ë“œëª…, ë£¨íŠ¸ì—ì„œ í•„ë“œê¹Œì§€ì˜ ê²½ë¡œ ë“± ì‘ì—…ì˜ ì‹¤í–‰ ìƒíƒœ.\n  }\n}</code></pre>\n<ol start=\"2\">\n<li>\n<p>src/graphql/typeDefs.js</p>\n<ul>\n<li>GraphQL ëª…ì„¸ì„œì—ì„œ ì‚¬ìš©ë  ë°ì´í„°, ìš”ì²­ì˜ íƒ€ì… (gqlë¡œ ìƒì„±ë¨)</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>Type Definitions</li>\n<li>ê°ì²´ íƒ€ì…ê³¼ í•„ë“œëª… ì„ ì–¸</li>\n</ul>\n<pre class=\"language-text\"><code class=\"language-text\">type Delivery {\n        id: Long!\n        orderId: Long \n        productId: Long \n        customerId: String \n        deliveryAddress: String \n        deliveryState: String \n        orders: [Order]\n        order(orderId: Long): Order\n    }\n  \n    type Order {\n        id: Long! \n        productId: Long\n        customerId: String\n        state: String\n        deliveries: [Delivery]\n        delivery(deliveryId: Long): Delivery\n    }\n\n    // []: ë°°ì—´\n    //  !: í•„ìˆ˜ê°’</code></pre>\n<ol start=\"3\">\n<li>\n<p>src/restApiServer/xxx-rest-api.js</p>\n<ul>\n<li>apollo-datasource-restì˜ í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ í˜¸ì¶œ í•¨ìˆ˜ë° í˜¸ì¶œ ê²½ë¡œ ì„¤ì •.</li>\n</ul>\n</li>\n</ol>\n<pre class=\"language-text\"><code class=\"language-text\">import {RESTDataSource} from &#39;apollo-datasource-rest&#39;;\n// apollo-datasource-rest ëª¨ë“ˆ\n\nclass orderRestApi extends RESTDataSource {\n    constructor() {\n        super();\n        this.baseURL = &#39;http://order:8080&#39;;\n        // í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ í˜¸ì¶œ ì£¼ì†Œ ì •ë³´.\n    }\n\n    // í•¨ìˆ˜ëª…() \n    async getOrders() {\n        const data = await this.get(&#39;/orders&#39;, {})\n        // baseURL ì´í›„ url í˜¸ì¶œ ì •ë³´.\n\n        var value = this.stringToJson(data);\n        // í˜¸ì¶œì •ë³´ String to Json ìœ¼ë¡œ ë³€ê²½. \n        \n        return value\n        // í˜¸ì¶œ ì •ë³´ ë¦¬í„´.\n    }\n\n    async getOrder(id) {\n        // ...\n    }\n\n    stringToJson(str){\n        if(typeof str == &#39;string&#39;){\n            str = JSON.parse(str);\n        }\n        return str;\n    }\n}</code></pre>\n<ol start=\"4\">\n<li>\n<p>src/index.js</p>\n<ul>\n<li>ì„ ì–¸ë¶€ í˜¸ì¶œ ë§¤í•‘ë° ì„ ì–¸.</li>\n</ul>\n</li>\n</ol>\n<pre class=\"language-text\"><code class=\"language-text\">import {ApolloServer} from &#39;apollo-server&#39;;\nimport resolvers from &#39;./graphql/resolvers.js&#39;;\nimport typeDefs from &#39;./graphql/typeDefs.js&#39;;\nimport orderRestApi from &#39;./restApiServer/order-rest-api.js&#39;\nimport deliveryRestApi from &#39;./restApiServer/delivery-rest-api.js&#39;\n\nconst server = new ApolloServer({\n    typeDefs,\n    resolvers,\n    dataSources: () =&gt; ({\n        orderRestApi: new orderRestApi(),\n        deliveryRestApi: new deliveryRestApi()\n    }),\n    // dataSources ì„ ì–¸ í•˜ì—¬ xxxRestApi í˜¸ì¶œì •ë³´.\n});\n\nserver.listen({\n    port: 8089,\n}).then(({url}) =&gt; {\n    console.log(`ğŸš€  Server ready at ${url}`);\n});</code></pre>\n","sidebar":"business","next":"","prev":"","headings":[{"depth":1,"value":" ë°ì´í„°í”„ë¡œì ì…˜-GraphQL","anchor":"#êµ¬í˜„-ë°ì´í„°í”„ë¡œì ì…˜-graphql"},{"depth":3,"value":"GraphQLë¡œ ë°±ì—”ë“œ ë°ì´í„° í†µí•©","anchor":"#graphqlë¡œ-ë°±ì—”ë“œ-ë°ì´í„°-í†µí•©"},{"depth":3,"value":"ì„œë¹„ìŠ¤ ì¡°íšŒ","anchor":"#ì„œë¹„ìŠ¤-ì¡°íšŒ"},{"depth":4,"value":"GraphQL íŒŒì¼ ì°¸ê³ ","anchor":"#graphql-íŒŒì¼-ì°¸ê³ "}]},"allMarkdownPage":{"edges":[{"node":{"path":"/operations/ops-service-mesh-istio/","title":"[Service Mesh] Istio"}},{"node":{"path":"/operations/ops-utility/","title":"ì¿ ë²„ë„¤í‹°ìŠ¤ ìœ í‹¸ë¦¬í‹°"}},{"node":{"path":"/operations/ops-readiness/","title":"ë¬´ì •ì§€ ë°°í¬ ì‹¤ìŠµ"}},{"node":{"path":"/operations/ops-persistence-volume/","title":"íŒŒì¼ì‹œìŠ¤í…œ (ë³¼ë¥¨) ì—°ê²°ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •"}},{"node":{"path":"/business/zero-based-cna/","title":"[ì„¤ê³„] ESëª¨ë¸ ê¸°ë°˜ Inner ì•„í‚¤í…ì²˜ ì´í•´"}},{"node":{"path":"/development/dp-graphql/","title":"[êµ¬í˜„] ë°ì´í„°í”„ë¡œì ì…˜-GraphQL"}},{"node":{"path":"/operations/ops-liveness/","title":"ì…€í”„íë§ ì‹¤ìŠµ"}},{"node":{"path":"/operations/ops-ingress-virtualhost/","title":"Ingress - Virtual Host based"}},{"node":{"path":"/operations/ops-ingress/","title":"Ingress ë¥¼ í†µí•œ ì§„ì…ì  í†µì¼ - Path-based routing"}},{"node":{"path":"/operations/ops-kubernetes/","title":"Kubernetes Basic Commands"}},{"node":{"path":"/operations/ops-deploy-my-app/","title":"ì• í”Œë¦¬ì¼€ì´ì…˜ íŒ¨í‚¤ì§•,ë„ì»¤ë¼ì´ì§•,í´ëŸ¬ìŠ¤í„° ë°°í¬"}},{"node":{"path":"/operations/ops-argo-rollout-canary-istio/","title":"[GitOps] Argo Rollout ì™€ Istio ë¥¼ í†µí•œ ì¹´ë‚˜ë¦¬ ë°°í¬"}},{"node":{"path":"/operations/ops-autoscale/","title":"Pod Auto Scaling"}},{"node":{"path":"/operations/ops-aws-setting/","title":"AWS Cloud Setup(EKS, ECR ì„¤ì •)"}},{"node":{"path":"/operations/ops-anatomy-kubernetes/","title":"ì¿ ë²„ë„¤í‹°ìŠ¤ ë‚´ë¶€êµ¬ì¡° ë¶„ì„"}},{"node":{"path":"/operations/msa-logging/","title":"MSA ë¡œê¹… with EFK Stack"}},{"node":{"path":"/operations/istio-traffic/","title":"[Service Mesh] Istio ë¥¼ í†µí•œ ë™ì  íŠ¸ë˜í”½ ë¼ìš°íŒ…"}},{"node":{"path":"/operations/k8s-monitoring/","title":"MSA ëª¨ë‹ˆí„°ë§ with installing Grafana"}},{"node":{"path":"/operations/istio-resiliency-part2/","title":"[Service Mesh] Istio ë¥¼ í†µí•œ ì„œë¹„ìŠ¤ íšŒë³µì„± Part2 - ì„œí‚·ë¸Œë ˆì´ì»¤"}},{"node":{"path":"/operations/istio-resiliency-part1/","title":"[Service Mesh] Istio ë¥¼ í†µí•œ ì„œë¹„ìŠ¤ íšŒë³µì„± Part1 - íƒ€ì„ì•„ì›ƒ/ì¬ì‹œë„"}},{"node":{"path":"/operations/istio-msa-telemetry/","title":"[Service Mesh] MSA ëª¨ë‹ˆí„°ë§ w/ Istio addon Grafana"}},{"node":{"path":"/operations/azure/","title":"Azure Cloud Setup (AKS, ACR ì„¤ì •)"}},{"node":{"path":"/operations/end-to-end/","title":"12ë²ˆê°€ ì „ì²´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ë°°í¬"}},{"node":{"path":"/operations/gitops-argo-cd/","title":"[GitOps] Argo CD ë¥¼ í†µí•œ ì¹´ë‚˜ë¦¬ ë°°í¬"}},{"node":{"path":"/development/ops-docker/","title":"[ë¹Œë“œ] Docker Image Build & Push"}},{"node":{"path":"/development/keycloak-oauth2-3/","title":"Fine grained RBAC w/ Resource Server"}},{"node":{"path":"/development/oauth2withkeycloak/","title":"JWTí† í° ê¸°ë°˜ ì¸ì¦ì¸ê°€ w/ Keycloak Authz-svr"}},{"node":{"path":"/development/oauth2/","title":"JWTí† í° ê¸°ë°˜ ì¸ì¦ì¸ê°€ w/ Spring Authz-svr"}},{"node":{"path":"/development/monolith2misvc/","title":"[êµ¬í˜„] Req/Res ë°©ì‹ì˜ MSA ì—°ë™"}},{"node":{"path":"/development/keycloak-oauth2-1/","title":"Keycloak Authorization ì„œë²„ ì„¤ì •"}},{"node":{"path":"/development/kafka-retry-dlq/","title":"Retry & Dead Letter Queue"}},{"node":{"path":"/development/kafka-scaling/","title":"Kafka ìŠ¤ì¼€ì¼ë§"}},{"node":{"path":"/development/keycloak-oauth2-2/","title":"Keycloak OIDC w/ OAuth2 Client"}},{"node":{"path":"/development/kafka-base/","title":"[pre-lab] ì¹´í”„ì¹´ ì—°ìŠµ"}},{"node":{"path":"/development/gateway/","title":"[êµ¬í˜„] ê²Œì´íŠ¸ì›¨ì´ë¥¼ í†µí•œ ì§„ì…ì  í†µì¼"}},{"node":{"path":"/development/front-end/","title":"í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ"}},{"node":{"path":"/development/kafka-manual-commit/","title":"Kafka ìˆ˜ë™ì»¤ë°‹"}},{"node":{"path":"/development/dp-cqrs/","title":"[êµ¬í˜„] ë°ì´í„°í”„ë¡œì ì…˜-CQRS"}},{"node":{"path":"/development/dp-composite-svc/","title":"[êµ¬í˜„] ë°ì´í„°í”„ë¡œì ì…˜-ì»´í¬ì§€íŠ¸ì„œë¹„ìŠ¤"}},{"node":{"path":"/development/cqrs-modeling/","title":"[pre-lab] CQRS ìƒ˜í”Œ ëª¨ë¸ë§"}},{"node":{"path":"/development/contract-test/","title":"[í…ŒìŠ¤íŠ¸] Consumer Driven Test ê¸°ë°˜ Contract Test"}},{"node":{"path":"/development/cna-pubsub2/","title":"[êµ¬í˜„] Pub/Sub - Compensation and Correlation"}},{"node":{"path":"/development/cna-start/","title":"[êµ¬í˜„] ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ì‹¤í–‰"}},{"node":{"path":"/development/cna-pubsub/","title":"[êµ¬í˜„] Pub/Sub ë°©ì‹ì˜ MSA ì—°ë™"}},{"node":{"path":"/development/circuitbreaker/","title":"[êµ¬í˜„] Req/Res ë°©ì‹ì—ì„œ ì¥ì• ì „íŒŒ ì°¨ë‹¨(ì„œí‚·ë¸Œë ˆì´ì»¤ íŒ¨í„´)"}},{"node":{"path":"/development/capstone-project-1/","title":"[Capstone Prj.] Simple Mall - Scenario/Modeling"}},{"node":{"path":"/development/capstone-project-2/","title":"[Capstone Prj.] Simple Mall - Implementation"}},{"node":{"path":"/business/ddd-google-drive/","title":"[ì´ë²¤íŠ¸ìŠ¤í† ë°] DDD êµ¬ê¸€ ë“œë¼ì´ë¸Œ ì˜ˆì œ"}},{"node":{"path":"/development/advanced-connect/","title":"Kafka Connect"}},{"node":{"path":"/business/","title":"[ë¶„ì„] DDD ì´ë²¤íŠ¸ì˜ ë„ì¶œ - 12ë²ˆê°€ ì‡¼í•‘ëª°"}},{"node":{"path":"/business/design-to-code/","title":"[ì„¤ê³„] ESëª¨ë¸ê¸°ë°˜ í…œí”Œë¦¿ ì½”ë“œ ë¶„ì„"}},{"node":{"path":"/business/eventstorming-fooddelivery/","title":"[ì´ë²¤íŠ¸ìŠ¤í† ë°] DDD Food Delivery ì˜ˆì œ"}},{"node":{"path":"/business/collaborative-eventstorming/","title":"[ì´ë²¤íŠ¸ìŠ¤í† ë°] Collaborative Eventstorming"}}]}},"context":{}}